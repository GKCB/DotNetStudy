# 数据库第二天  

## 目录

[复习](#复习)  
[约束详解](#约束详解)  
[Select查询详解](#select查询详解)  
[类型转换](#类型转换)  
[表联合](#表联合)  
[一次性插入多条数据](#一次性插入多条数据)  
[日期函数](#日期函数)  
[字符串函数的使用](#字符串函数的使用)  
[练习](#练习)  

附录：  
[代码参照]()  

## 复习  

数据库的创建步骤：  
&emsp;创建数据库的SQL：  
&emsp;创建表的SQL语句：    
&emsp;NChar和Char的区别：  
&emsp;数据库的实例名怎么理解：  
&emsp;select, delete, update, Insert：  

创建数据库的SQL:  

```sql{.line-numbers}  
create database 数据库名
--下面这段内容也不是必须要写的，有也无妨。
on
(
	name='',
	size=5MB,
	filegrowth=2MB,
	filename="....\data\db.mdf"
)
log on
(
	name='_log',
	size=5MB,
	filegrowth=2MB,
	filename="....\data\db_log.ldf"
)
```  

创建表的SQL语句:    
```sql{.line-numbers}  
create table 表名
(
	列名 类型 null,
	.....,
	列名  类型 primaryt key not null,--主键列
	
	列名  类型 identity(1,1) not null,--自动增长,只能用于数据的类型：int，bigint,float	
)
```
NChar和Char的区别:
`NChar` 的 `N` 表示存储的是Unicode数据类型的字符。两个字节存储一个字符，避免乱码。  

《[char和nchar，varchar和nvarchar的区别（转载）](https://www.cnblogs.com/henuliulei/p/9744790.html)》  

数据库的实例名怎么理解：  
`SQL Server(MSSQLSERVER)` 中 `MSSQLSERVER`表示默认的数据库实例名。  
一台机器上的不同的数据库，通过服务实例来区分。  

select, delete, update, Insert：  
```sql{.line-numbers} 
select 列名，....  from 表 where 表达式1 and 表达式2
--delete一定不要忘了加 where 条件
delete from 表 where 表达式1 and 表达式2              
update 表名 set 列1=值，列2=值                         
insert into 表名(列1，列2...) values(值1，值2...)    
```

返回：[目录](#目录)  

## 约束详解  

约束的目的：保证数据的完整性,非空约束(not null)。但是校验的过程本身也降低了效率。  
默认值约束、可空约束、主键约束、外键约束、唯一键约束、检查约束。 
alter table 添加列，修改列，删除列:不是重点。  

```sql{.line-numbers} 
--给数据库的表添加一列
--alter table 表名 add 列名 类型 null
alter table dbo.UserInfo add [Address] nvarchar(32) null
go
alter table dbo.UserInfo add [DelFlag] smallint null
go

--代码的方式:给列添加默认值约束
--alter table 表名 add constraint 约束的名字 default(0) for DelFalg
alter table dbo.UserInfo add constraint DF_UserInfo_DelFlag default(0) for DelFlag
go
--添加数据
insert into UserInfo([Address]) values(N'中关村')
go
```

语法上，添加约束和添加列非常接近：  
```sql{.line-numbers}  
--给数据库的表添加一列
--alter table 表名 add 列名 类型 null
alter table dbo.UserInfo add [Address] nvarchar(32) null
go
alter table dbo.UserInfo add [DelFlag] smallint null
go
```
```sql{.line-numbers}  
--数据库的表删除一个列
--删除之前要解决约束
alter table UserInfo drop constraint DF_UserInfo_DelFlag
go
alter table UserInfo drop column DelFlag
go
```

```sql{.line-numbers}  
--修改一个列
alter table UserInfo alter Column [Address] nvarchar(64) null
```

主键约束:  
```sql{.line-numbers}  
create table Product
(
	ProId int identity(1,1) not null,
	ProName nvarchar(32) null,
	ProCreateOn DateTime default(getdate()),
)
go

--给表创建一个主键
alter table Product add constraint PK_Product_ProId primary key(ProId)
```

外键约束:  
商品属于某个外键列。  
```sql{.line-numbers}  
--分类表 和商品关系
--一个分类有多个商品，一个商品只属于一个分类
create table Category
(
	CatId int identity(1,1) primary key not null,
	CatName nvarchar(32) null,
	ParentCatId int null,
	DelFlag smallint default(0) null
)
go
```


返回：[目录](#目录)  

## Select查询详解  



返回：[目录](#目录)  

